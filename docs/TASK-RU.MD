# Тестовое задание для .NET разработчика: Task Management Service

## Цель:
Создание API-сервиса, предназначенного для простого управления задачами пользователя (Task Management Service).

## Функциональные требования:

### 1. Создание, удаление и получение задач пользователя
   a. Каждая задача должна содержать:
      i. Название задачи (Title)
      ii. Описание задачи (Description)
      iii. Статус задачи (новая, в работе, выполненная) (Status)
      iv. Дату создания и дату изменения (CreatedAt, UpdatedAt)

### 2. Синхронное взаимодействие между сервисами
   a. Реализовать отдельный сервис-слушатель, который предоставляет методы получения данных о событиях изменения задачи и логирует их.

### 3. (Опционально) Асинхронное взаимодействие между сервисами через очередь сообщений Kafka или RabbitMQ
   a. При создании, изменении или удалении задачи отправлять события (producer).
   b. Создать отдельный сервис-слушатель очереди (consumer), который принимает события об изменении задачи и логирует их.

## Технические требования и стек:
- **Язык программирования:** .NET 8 / ASP.NET Core
- **ORM:** Использование ORM системы для работы с БД. Предпочтительно - EF Core
- **База данных:** Желательно использовать PostgreSQL или Microsoft SQL Server (в проекте используется PostgreSQL с EF Core)
- **Message broker:** Kafka или RabbitMQ (в проекте используется RabbitMQ)
- **Observability:** Логирование (вывод на консоль или в текстовый файл)
- **Трассировка:** OpenTelemetry (дополнительное требование)

## Требования к реализации кода:
- Чистая и понятная структура кода, следование принципам SOLID
- Наличие файла README с инструкцией по запуску проекта

## Дополнительные требования (опционально, плюсом будет считаться):
- Dockerfile и возможность запустить проект через Docker compose
- Покрытие кода unit-тестами
- Наличие XML-документации к классам, методам и свойствам
- Добавление трассировки (OpenTelemetry)

## Результаты:
- Исходный код приложения на **GitHub** с читаемым README
- **Инструкция по запуску** проекта (локально и через Docker)
- **Архитектурное описание** решения и принятых решений
- Демонстрация работы **синхронного и асинхронного взаимодействия**

## Критерии оценки:
- Качество архитектуры и соблюдение SOLID принципов
- Надежность обработки ошибок и edge cases
- Чистота и читаемость кода
- Полнота реализации заявленных требований
- Качество тестов и документации


# Задание 2: SQL Функция для анализа платежей

## Цель задания
Необходимо написать табличную функцию SQL, которая будет возвращать по ClientId и интервалу дат (тип Date) поденные суммы платежей. Если за указанный день не было платежей, то функция должна возвращать 0. Интервалы дат могут охватывать несколько лет.

## Структура данных
Таблица платежей клиентов `ClientPayments`:

```sql
ClientPayments
(
    Id bigint,          -- первичный ключ таблицы
    ClientId bigint,    -- Id клиента
    Dt datetime2(0),    -- дата платежа
    Amount money        -- сумма платежа
)
```

## Пример входных данных

| Id | ClientId | Dt                  | Amount |
|----|----------|---------------------|--------|
| 1  | 1        | 2022-01-03 17:24:00 | 100    |
| 2  | 1        | 2022-01-05 17:24:14 | 200    |
| 3  | 1        | 2022-01-05 18:23:34 | 250    |
| 4  | 1        | 2022-01-07 10:12:38 | 50     |
| 5  | 2        | 2022-01-05 17:24:14 | 278    |
| 6  | 2        | 2022-01-10 12:39:29 | 300    |

## Требования к функции
- Функция должна принимать три параметра:
  - `@ClientId` - идентификатор клиента
  - `@StartDate` - начальная дата периода (тип Date)
  - `@EndDate` - конечная дата периода (тип Date)
- Функция должна возвращать таблицу с колонками:
  - `Dt` - дата (тип Date)
  - `Сумма` - сумма платежей за день (тип money)
- Для дней, когда не было платежей, должна возвращаться сумма 0
- Должны быть включены все дни в указанном диапазоне (включая начальную и конечную даты)

## Примеры работы функции

### Пример 1

**Входные параметры:**
- `ClientId` = 1
- `StartDate` = 2022-01-02
- `EndDate` = 2022-01-07

**Результат работы функции:**

| Dt         | Сумма |
|------------|-------|
| 2022-01-02 | 0     |
| 2022-01-03 | 100   |
| 2022-01-04 | 0     |
| 2022-01-05 | 450   |
| 2022-01-06 | 0     |
| 2022-01-07 | 50    |

### Пример 2

**Входные параметры:**
- `ClientId` = 2
- `StartDate` = 2022-01-04
- `EndDate` = 2022-01-11

**Результат работы функции:**

| Dt         | Сумма |
|------------|-------|
| 2022-01-04 | 0     |
| 2022-01-05 | 278   |
| 2022-01-06 | 0     |
| 2022-01-07 | 0     |
| 2022-01-08 | 0     |
| 2022-01-09 | 0     |
| 2022-01-10 | 300   |
| 2022-01-11 | 0     |

## Примечания
- Функция должна работать корректно для периодов, охватывающих несколько лет
- Необходимо обеспечить оптимальную производительность при работе с большими объемами данных
- Рекомендуется использовать рекурсивные CTE или таблицы чисел для генерации последовательности дат